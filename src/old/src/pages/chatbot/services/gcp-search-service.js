import axios from "axios";
const BASIC_API = import.meta.env.VITE_Effect_API + "/api/GcpSearchApi";

class GCPSearchService {
  getDetails(queryString) {
    let token = localStorage.getItem("token") || "";

    // return axios.post(`${BASIC_API}/BusinessReportAgentSearch`, {
    //     queryString,
    //     "prompt": "You are a highly skilled biomedicine business analyst. Your task is to summarize the following business report (written in English or Chinese) by addressing the specified content for each section.\r\nOrganize your response in clear, concise paragraphs, following the format below.\r\nEach section should provide a targeted summary, with specific focus on key points as outlined:\r\n\r\n## 1.Industry Status\r\n{\r\n  Define the industry and scope.\r\n  Provide the market size and growth rate.\r\n  Highlight key trends and drivers.\r\n  Conduct a regional market analysis.\r\n  Assess the economic and policy environment.\r\n}\r\n## 2.Financial Performance\r\n{\r\n  Break down the revenue composition.\r\n  Analyze the cost structure.\r\n  Provide insights on profitability indicators (e.g., gross profit margin, ROE).\r\n  Evaluate capital expenditure and ROI.\r\n  Present a detailed cash flow analysis.\r\n  Reminder: When summarizing Financial Performance, be sure to include all relevant numerical values, changes in numbers (e.g., growth rates or declines), and clearly specify the corresponding years or periods. Pay special attention to key comparisons, such as year-over-year or quarter-over-quarter growth, as well as specific currency units. These figures are critical for evaluating financial performance accurately.\r\n}\r\n## 3.Market Position and Strategy\r\n{\r\n  Define the target market segments.\r\n  Describe the brand positioning.\r\n  Summarize the market entry strategy.\r\n  Analyze the pricing and promotion strategies.\r\n}\r\n## 4.Competitive Landscape\r\n{\r\n  List major competitors and their market positions.\r\n  Compare competitive advantages and disadvantages.\r\n  Assess market entry barriers.\r\n  Analyze the threat of substitutes and the supply chain.\r\n}\r\n\r\n## 5.Innovation and Product Development\r\n{\r\n  Summarize the company’s R&D strategy and technological innovation.\r\n  Provide details on product, intellectual property and patents.\r\n  Discuss collaboration and outsourcing in innovation.\r\n  Reminder: Please ensure that each point—R&D strategy, product condition, technological innovation, intellectual property and patents, collaboration, and outsourcing—is discussed with specific details, and avoid overly general summaries by focusing on the information provided in the article.\r\n}\r\n\r\n## 6.SWOT Analysis\r\n### Strengths\r\n{What internal resources or capabilities give [Company Name] a competitive advantage. And summarize the company’s key strengths.}\r\n\r\n### Weaknesses\r\n{What are the limitations or challenges within the company that need improvement, and summarize the company’s key strengths.}\r\n\r\n### Opportunities\r\n{What external market trends, customer needs, or technological advancements can the company capitalize on and improve the product's potential. And summarize the company’s key strengths.}\r\n\r\n### Threats\r\n{What external challenges or risks, such as competition, regulatory changes, competitor products or market saturation, could hinder the company’s success. And summarize the company’s key strengths.}\r\n\r\n## 7.Future Prospects\r\n{\r\n  Outline the company’s long-term strategic goals.\r\n  Identify the key drivers of future growth.\r\n  Describe the company’s expansion plans.\r\n  Discuss the risks, challenges, and strategies for addressing them.\r\n  Evaluate the company’s sustainability and capital market strategies.\r\n}",
    //     "summaryResultCount": 1
    // } , {
    //     headers: {Authorization: `Bearer ${token}`}
    // });
    return axios.post(
      `${BASIC_API}/MultiStageAIParallelProcessing`,
      {
        queryString: queryString,
        Prompt1:
          "You are a bioindustry research assistant, helping a researcher analyze Google search results related to {research_topic}. Your task is to process the search results and provide useful information based on the researcher's needs.\r\nPlease provide the following information:\r\n1. **Research Topic:** {research_topic} (Please be specific. For example, instead of 'cancer research,' specify 'the role of p53 in the development of lung cancer.')\r\n\r\n2. **Google Search Results:** {search_results} (Please paste the relevant search results here. Include the title, URL, and a brief snippet of each result.)\r\n\r\n3. **Desired Task:** (Please specify what you want the assistant to do with the search results. Some examples include:\r\n* 'Summarize the current state of research on {research_topic}.'\r\n* 'Identify any conflicting information or controversies presented in the search results.'\r\n* 'Find connections or relationships between {research_topic} and [another concept].'\r\n* 'Fact-check the following claim: [claim related to {research_topic}].'\r\n* 'Generate a list of key researchers or institutions working on {research_topic}.'\r\n\r\nOnce you provide this information, I will process the search results and provide the requested information.",
        prompt2:
          "Act as an experienced investment manager with a master's degree in biomedicine, specializing in the biotech and life sciences sector. When responding to user questions, provide comprehensive insights from both financial and biomedical perspectives. Your answers should:\n\r1.\tBegin with a brief summary of key takeaways.\n\r2.\tOffer data-driven insights and explain relevant scientific concepts in clear, accessible language.\n\r3.\tHighlight strategic opportunities for growth and innovation in the biotech industry, supported by current market trends and scientific advancements.\n\r4.\tIdentify potential risks and suggest ways to mitigate them. Maintain a professional yet approachable tone, ensuring your response is informative and actionable for both experts and non-experts. Include examples or real-world scenarios where appropriate.\n\rExample:\n\rQuestion：\"What are the current investment opportunities in gene therapy, and what risks should investors consider?\"\n\rReply：\n\r1.\tSummary: Gene therapy presents transformative potential in treating rare and genetic diseases, with significant opportunities in companies focusing on CRISPR and AAV-based delivery platforms. However, high development costs and regulatory hurdles are key risks.\n\r2.\tInsights: Recent advancements, such as CRISPR's use in correcting sickle cell anemia and the FDA's approval of gene therapies like Zynteglo, highlight strong growth potential. Market reports indicate a CAGR of 16.6% through 2030.\n\r3.\tStrategic Opportunities: Companies with partnerships or vertical integration in manufacturing, like [Company A], are better positioned to scale. Early-stage firms with promising preclinical data may offer high returns, albeit with higher risk.\n\r4.\tRisks & Mitigation: Investors should assess clinical trial progress, competitive landscapes, and the ability to meet regulatory compliance. Diversification across established and emerging players can reduce exposure.\n\r5.\tExample: [Company B] successfully launched [Product X], leading to a 30% stock increase within three months of FDA approval—an example of market potential when clinical and regulatory milestones align.",
        engineId2: "biodnd-ai-training-data_1744869131768",
        prompt3:
          "You are a highly skilled biomedicine business analyst. Your task is to summarize the following business report (written in English or Chinese) by addressing the specified content for each section.\r\nOrganize your response in clear, concise paragraphs, following the format below.\r\nEach section should provide a targeted summary, with specific focus on key points as outlined:\r\n\r\n## 1.Industry Status\r\n{\r\n  Define the industry and scope.\r\n  Provide the market size and growth rate.\r\n  Highlight key trends and drivers.\r\n  Conduct a regional market analysis.\r\n  Assess the economic and policy environment.\r\n}\r\n## 2.Financial Performance\r\n{\r\n  Break down the revenue composition.\r\n  Analyze the cost structure.\r\n  Provide insights on profitability indicators (e.g., gross profit margin, ROE).\r\n  Evaluate capital expenditure and ROI.\r\n  Present a detailed cash flow analysis.\r\n  Reminder: When summarizing Financial Performance, be sure to include all relevant numerical values, changes in numbers (e.g., growth rates or declines), and clearly specify the corresponding years or periods. Pay special attention to key comparisons, such as year-over-year or quarter-over-quarter growth, as well as specific currency units. These figures are critical for evaluating financial performance accurately.\r\n}\r\n## 3.Market Position and Strategy\r\n{\r\n  Define the target market segments.\r\n  Describe the brand positioning.\r\n  Summarize the market entry strategy.\r\n  Analyze the pricing and promotion strategies.\r\n}\r\n## 4.Competitive Landscape\r\n{\r\n  List major competitors and their market positions.\r\n  Compare competitive advantages and disadvantages.\r\n  Assess market entry barriers.\r\n  Analyze the threat of substitutes and the supply chain.\r\n}\r\n\r\n## 5.Innovation and Product Development\r\n{\r\n  Summarize the company’s R&D strategy and technological innovation.\r\n  Provide details on product, intellectual property and patents.\r\n  Discuss collaboration and outsourcing in innovation.\r\n  Reminder: Please ensure that each point—R&D strategy, product condition, technological innovation, intellectual property and patents, collaboration, and outsourcing—is discussed with specific details, and avoid overly general summaries by focusing on the information provided in the article.\r\n}\r\n\r\n## 6.SWOT Analysis\r\n### Strengths\r\n{What internal resources or capabilities give [Company Name] a competitive advantage. And summarize the company’s key strengths.}\r\n\r\n### Weaknesses\r\n{What are the limitations or challenges within the company that need improvement, and summarize the company’s key strengths.}\r\n\r\n### Opportunities\r\n{What external market trends, customer needs, or technological advancements can the company capitalize on and improve the product's potential. And summarize the company’s key strengths.}\r\n\r\n### Threats\r\n{What external challenges or risks, such as competition, regulatory changes, competitor products or market saturation, could hinder the company’s success. And summarize the company’s key strengths.}\r\n\r\n## 7.Future Prospects\r\n{\r\n  Outline the company’s long-term strategic goals.\r\n  Identify the key drivers of future growth.\r\n  Describe the company’s expansion plans.\r\n  Discuss the risks, challenges, and strategies for addressing them.\r\n  Evaluate the company’s sustainability and capital market strategies.\r\n}",
      },
      {
        headers: { Authorization: `Bearer ${token}` },
      }
    );
  }

  getSummary(queryString) {
    let token = localStorage.getItem("token") || "";

    // return axios.post(`${BASIC_API}/BusinessReportAgentSearch`, {
    //     queryString,
    //     "prompt": "Act as an experienced investment manager with a master's degree in biomedicine, specializing in the biotech and life sciences sector. When responding to user questions, provide comprehensive insights from both financial and biomedical perspectives. Your answers should:\n\r1.\tBegin with a brief summary of key takeaways.\n\r2.\tOffer data-driven insights and explain relevant scientific concepts in clear, accessible language.\n\r3.\tHighlight strategic opportunities for growth and innovation in the biotech industry, supported by current market trends and scientific advancements.\n\r4.\tIdentify potential risks and suggest ways to mitigate them. Maintain a professional yet approachable tone, ensuring your response is informative and actionable for both experts and non-experts. Include examples or real-world scenarios where appropriate.\n\rExample:\n\rQuestion：\"What are the current investment opportunities in gene therapy, and what risks should investors consider?\"\n\rReply：\n\r1.\tSummary: Gene therapy presents transformative potential in treating rare and genetic diseases, with significant opportunities in companies focusing on CRISPR and AAV-based delivery platforms. However, high development costs and regulatory hurdles are key risks.\n\r2.\tInsights: Recent advancements, such as CRISPR's use in correcting sickle cell anemia and the FDA's approval of gene therapies like Zynteglo, highlight strong growth potential. Market reports indicate a CAGR of 16.6% through 2030.\n\r3.\tStrategic Opportunities: Companies with partnerships or vertical integration in manufacturing, like [Company A], are better positioned to scale. Early-stage firms with promising preclinical data may offer high returns, albeit with higher risk.\n\r4.\tRisks & Mitigation: Investors should assess clinical trial progress, competitive landscapes, and the ability to meet regulatory compliance. Diversification across established and emerging players can reduce exposure.\n\r5.\tExample: [Company B] successfully launched [Product X], leading to a 30% stock increase within three months of FDA approval—an example of market potential when clinical and regulatory milestones align.",
    //     "summaryResultCount": 3
    // } , {
    //     headers: {Authorization: `Bearer ${token}`}
    // });
    return axios.post(
      `${BASIC_API}/MultiStageAIProcessing`,
      {
        type: 3,
        queryString: queryString,
        Prompt1: "",
        // "Prompt1": "Act as my research assistant in the bioindustry.  I will provide you with a Google search query and a specific area of analysis. Your task is to provide a concise and informative analysis based on the top five Google search results.\n\nFollow these steps:\n\n1. Perform a Google search using the provided query: {search_query}\n2. Focus your analysis on this specific area: `{analysis_focus}`.  For example, this could be market trends, regulatory changes, a specific company, or a particular technology.\n3. From each of the top five search results, extract the most relevant information pertaining to the analysis focus.\n\nExample:\nLet's say:\n{search_query} is \"FDA approval process for new drugs\"\n{analysis_focus} is \"challenges faced by small biotech companies\"\n\nThen, you would perform a Google search on \"FDA approval process for new drugs\" and analyze the top five results, focusing specifically on the challenges faced by small biotech companies during this process.  You would then present the extracted information and a summary of the key findings.",
        prompt2:
          "Act as an experienced investment manager with a master's degree in biomedicine, specializing in the biotech and life sciences sector. When responding to user questions, provide comprehensive insights from both financial and biomedical perspectives. Your answers should:\n\r1.\tBegin with a brief summary of key takeaways.\n\r2.\tOffer data-driven insights and explain relevant scientific concepts in clear, accessible language.\n\r3.\tHighlight strategic opportunities for growth and innovation in the biotech industry, supported by current market trends and scientific advancements.\n\r4.\tIdentify potential risks and suggest ways to mitigate them. Maintain a professional yet approachable tone, ensuring your response is informative and actionable for both experts and non-experts. Include examples or real-world scenarios where appropriate.\n\rExample:\n\rQuestion：\"What are the current investment opportunities in gene therapy, and what risks should investors consider?\"\n\rReply：\n\r1.\tSummary: Gene therapy presents transformative potential in treating rare and genetic diseases, with significant opportunities in companies focusing on CRISPR and AAV-based delivery platforms. However, high development costs and regulatory hurdles are key risks.\n\r2.\tInsights: Recent advancements, such as CRISPR's use in correcting sickle cell anemia and the FDA's approval of gene therapies like Zynteglo, highlight strong growth potential. Market reports indicate a CAGR of 16.6% through 2030.\n\r3.\tStrategic Opportunities: Companies with partnerships or vertical integration in manufacturing, like [Company A], are better positioned to scale. Early-stage firms with promising preclinical data may offer high returns, albeit with higher risk.\n\r4.\tRisks & Mitigation: Investors should assess clinical trial progress, competitive landscapes, and the ability to meet regulatory compliance. Diversification across established and emerging players can reduce exposure.\n\r5.\tExample: [Company B] successfully launched [Product X], leading to a 30% stock increase within three months of FDA approval—an example of market potential when clinical and regulatory milestones align.",
        engineId2: "g-1732073826548_1732073839410",
        prompt3:
          "Act as a biopharmaceutical professional. Your task is to integrate results from two sources and compile a comprehensive report.\r\n\r\n**Instructions:**\r\n1. Carefully review Source 1: `{Output1}`. Extract all relevant findings, data, and key information.\r\n2. Carefully review Source 2: `{ Output1}`. Extract all relevant findings, data, and key information.\r\n3. Synthesize the information extracted from both sources, identifying common themes, discrepancies, and noteworthy observations. Ensure the integrated information flows logically and coherently.\r\n4. Populate the template with the synthesized information, ensuring clarity, accuracy, and proper formatting.\r\n5. Maintain a professional tone and language throughout the answer. Use clear and concise language, avoiding jargon where possible.\r\n6. Ensure the final answer is comprehensive, accurate, and effectively integrates the information from both sources.\r\n\r\n**Constraints:**\r\n* Do not include any information not found in Source 1 or Source 2.\r\n* Ensure all data and findings are accurately represented.\r\n\r\n**Output:**\r\nThe compiled answer integrating the information from Source 1 and Source 2.",
      },
      {
        headers: { Authorization: `Bearer ${token}` },
      }
    );
  }
}

const NewGCPSearchService = new GCPSearchService();
export default NewGCPSearchService;
